# Aè‚¡åˆ†æMulti-Agentç³»ç»Ÿæ¶æ„è®¾è®¡

## ğŸ¯ ç³»ç»Ÿæ¦‚è¿°

### è®¾è®¡ç›®æ ‡
æ„å»ºä¸€å¥—ä¸“ä¸šçš„Aè‚¡å…¬å¸æŠ•èµ„ä»·å€¼åˆ†æç³»ç»Ÿï¼Œé€šè¿‡4ä¸ªä¸“ä¸šåŒ–Agentåä½œï¼Œç”ŸæˆåŒ…å«æ•°æ®æ¥æºçš„ç»“æ„åŒ–æŠ•èµ„åˆ†ææŠ¥å‘Šã€‚

### æ ¸å¿ƒåŸåˆ™
- **ä¸“ä¸šåˆ†å·¥**ï¼šæ¯ä¸ªAgentä¸“æ³¨ç‰¹å®šåˆ†æé¢†åŸŸ
- **æ•°æ®é©±åŠ¨**ï¼šæ‰€æœ‰åˆ†æåŸºäºAè‚¡æ•°æ®APIå’ŒMCPæœåŠ¡
- **å¯è¿½æº¯æ€§**ï¼šæ‰€æœ‰ç»“è®ºéƒ½æœ‰æ˜ç¡®çš„æ•°æ®æ¥æº
- **æ ‡å‡†åŒ–è¾“å‡º**ï¼šé‡‡ç”¨é‡‘å­—å¡”åŸç†çš„æŠ¥å‘Šç»“æ„

---

## ğŸ—ï¸ æ€»ä½“æ¶æ„è®¾è®¡

### æ¶æ„æ¨¡å¼
é‡‡ç”¨TradingAgentsæˆç†Ÿçš„**åˆ†å±‚åä½œæ¨¡å¼**ï¼Œç»“åˆAè‚¡å¸‚åœºç‰¹ç‚¹è®¾è®¡ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Aè‚¡æŠ•èµ„åˆ†æç³»ç»Ÿ                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                  ä¿¡æ¯æ•´åˆå±‚ (Layer 4)                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚            æŠ•èµ„åˆ†ææŠ¥å‘Šæ•´åˆAgent                          â”‚ â”‚
â”‚  â”‚    â€¢ é‡‘å­—å¡”åŸç†æŠ¥å‘Šç”Ÿæˆ                                  â”‚ â”‚
â”‚  â”‚    â€¢ å¤šç»´åº¦ç»“è®ºç»¼åˆ                                      â”‚ â”‚
â”‚  â”‚    â€¢ æŠ•èµ„å»ºè®®è¾“å‡º                                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                  ä¸“ä¸šåˆ†æå±‚ (Layer 3)                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ æ ¸å¿ƒè´¢åŠ¡æŒ‡æ ‡ â”‚ â”‚ è¡Œä¸šå¯¹æ¯”ä¸   â”‚ â”‚ ä¼°å€¼ä¸å¸‚åœºä¿¡å·åˆ†æ      â”‚ â”‚
â”‚  â”‚ åˆ†æAgent   â”‚ â”‚ ç«äº‰ä¼˜åŠ¿     â”‚ â”‚ Agent                  â”‚ â”‚
â”‚  â”‚             â”‚ â”‚ åˆ†æAgent   â”‚ â”‚                        â”‚ â”‚
â”‚  â”‚â€¢ è¥æ”¶å‡€åˆ©æ¶¦ â”‚ â”‚â€¢ è¡Œä¸šå¢é•¿ç‡ â”‚ â”‚â€¢ è‚¡æƒå˜åŠ¨åˆ†æ          â”‚ â”‚
â”‚  â”‚â€¢ ROEåˆ†æ    â”‚ â”‚â€¢ æ¯›åˆ©ç‡å¯¹æ¯” â”‚ â”‚â€¢ è‚¡ä¸œç»“æ„åˆ†æ          â”‚ â”‚
â”‚  â”‚â€¢ èµ„äº§è´Ÿå€ºè¡¨ â”‚ â”‚â€¢ ç«äº‰åœ°ä½   â”‚ â”‚â€¢ PR=PE/ROEä¼°å€¼         â”‚ â”‚
â”‚  â”‚â€¢ ç°é‡‘æµåˆ†æ â”‚ â”‚â€¢ è¡Œä¸šåœ°ä½   â”‚ â”‚â€¢ å¸‚åœºä¿¡å·è§£è¯»          â”‚ â”‚
â”‚  â”‚â€¢ è‚¡ä¸œå›æŠ¥   â”‚ â”‚             â”‚ â”‚                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                  æ•°æ®è·å–å±‚ (Layer 2)                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                  Aè‚¡æ•°æ®å·¥å…·é›†                           â”‚ â”‚
â”‚  â”‚  â€¢ Aè‚¡æ•°æ®API (17ä¸ªè´¢åŠ¡åˆ†ææ¥å£)                         â”‚ â”‚
â”‚  â”‚  â€¢ MCPæœåŠ¡ (å®æ—¶æ•°æ®æŸ¥è¯¢)                               â”‚ â”‚
â”‚  â”‚  â€¢ æŠ€æœ¯æŒ‡æ ‡è®¡ç®—                                          â”‚ â”‚
â”‚  â”‚  â€¢ è¡Œä¸šå¯¹æ¯”æ•°æ®                                          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                  åŸºç¡€è®¾æ–½å±‚ (Layer 1)                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                   ç³»ç»ŸåŸºç¡€ç»„ä»¶                           â”‚ â”‚
â”‚  â”‚  â€¢ LLMé…ç½® (è‡ªå®šä¹‰OpenAPI endpoint)                     â”‚ â”‚
â”‚  â”‚  â€¢ çŠ¶æ€ç®¡ç† (AnalysisState)                            â”‚ â”‚
â”‚  â”‚  â€¢ å†…å­˜ç®¡ç† (åˆ†æå†å²è®°å½•)                               â”‚ â”‚
â”‚  â”‚  â€¢ å·¥ä½œæµæ§åˆ¶ (LangGraph)                              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ Agentè¯¦ç»†è®¾è®¡

### 1. æ ¸å¿ƒè´¢åŠ¡æŒ‡æ ‡åˆ†æAgent

**åŠŸèƒ½å®šä½**ï¼šä¸“æ³¨å…¬å¸è´¢åŠ¡å¥åº·åº¦å’Œç›ˆåˆ©èƒ½åŠ›åˆ†æ

**æ ¸å¿ƒèŒè´£**ï¼š
- **è¥æ”¶ä¸å‡€åˆ©æ¶¦åˆ†æ**ï¼šå†å²å¢é•¿è¶‹åŠ¿ã€å­£åº¦/å¹´åº¦å¯¹æ¯”
- **å‡€èµ„äº§æ”¶ç›Šç‡åˆ†æ**ï¼šROEå¥åº·åº¦è¯„ä¼°ã€åŒè¡Œä¸šå¯¹æ¯”
- **èµ„äº§è´Ÿå€ºè¡¨åˆ†æ**ï¼šèµ„äº§ç»“æ„ã€è´Ÿå€ºæ°´å¹³ã€å¿å€ºèƒ½åŠ›
- **ç°é‡‘æµåˆ†æ**ï¼šç»è¥æ€§ç°é‡‘æµã€ç°é‡‘æµä¸å‡€åˆ©æ¶¦åŒ¹é…åº¦
- **è‚¡ä¸œå›æŠ¥åˆ†æ**ï¼šåˆ†çº¢å†å²ã€åˆ†çº¢ç‡ã€è‚¡ä¸œå›æŠ¥æ°´å¹³

**å…³é”®æ•°æ®æº**ï¼š
```python
# ä¸»è¦ä½¿ç”¨çš„APIæ¥å£
- get_financial_reports()      # è´¢åŠ¡æŠ¥è¡¨æ•°æ®
- get_latest_financial_reports() # æœ€æ–°è´¢æŠ¥
- calculate_financial_ratios() # è´¢åŠ¡æ¯”ç‡è®¡ç®—
- get_financial_summary()     # è´¢åŠ¡æ‘˜è¦
```

**è¾“å‡ºæ ¼å¼**ï¼š
```markdown
## æ ¸å¿ƒè´¢åŠ¡æŒ‡æ ‡åˆ†ææŠ¥å‘Š

### 1. è¥æ”¶ä¸å‡€åˆ©æ¶¦åˆ†æ
- è¥æ”¶å¢é•¿ç‡ï¼šX%ï¼ˆæ•°æ®æ¥æºï¼š2024Q3è´¢æŠ¥ï¼‰
- å‡€åˆ©æ¶¦å¢é•¿ç‡ï¼šX%ï¼ˆæ•°æ®æ¥æºï¼šè¿‘3å¹´å¹´æŠ¥å¯¹æ¯”ï¼‰
- å¢é•¿è¶‹åŠ¿è¯„ä¼°ï¼š[ç¨³å®šå¢é•¿/æ³¢åŠ¨/ä¸‹æ»‘]

### 2. å‡€èµ„äº§æ”¶ç›Šç‡åˆ†æ  
- å½“å‰ROEï¼šX%ï¼ˆæ•°æ®æ¥æºï¼šæœ€æ–°å¹´æŠ¥ï¼‰
- è¡Œä¸šå¹³å‡ROEï¼šX%ï¼ˆæ•°æ®æ¥æºï¼šåŒè¡Œä¸šå¯¹æ¯”ï¼‰
- ROEå¥åº·åº¦ï¼š[ä¼˜ç§€/è‰¯å¥½/ä¸€èˆ¬/è¾ƒå·®]

### 3. èµ„äº§è´Ÿå€ºè¡¨å¥åº·åº¦
- èµ„äº§è´Ÿå€ºç‡ï¼šX%
- æµåŠ¨æ¯”ç‡ï¼šX
- èµ„äº§ç»“æ„è¯„ä¼°ï¼š[å¥åº·/éœ€å…³æ³¨/é£é™©]

### 4. ç°é‡‘æµçŠ¶å†µ
- ç»è¥æ€§ç°é‡‘æµå‡€é¢ï¼šXä¸‡å…ƒ
- ç°é‡‘æµ/å‡€åˆ©æ¶¦æ¯”ï¼šX
- ç°é‡‘æµå¥åº·åº¦ï¼š[ä¼˜ç§€/è‰¯å¥½/ä¸€èˆ¬/è¾ƒå·®]

### 5. è‚¡ä¸œå›æŠ¥æ°´å¹³
- è¿‘3å¹´å¹³å‡åˆ†çº¢ç‡ï¼šX%
- åˆ†çº¢ç¨³å®šæ€§ï¼š[ç¨³å®š/æ³¢åŠ¨/æ— åˆ†çº¢]
- è‚¡ä¸œå›æŠ¥è¯„çº§ï¼š[ä¼˜ç§€/è‰¯å¥½/ä¸€èˆ¬/è¾ƒå·®]

**ç»¼åˆè¯„åˆ†**ï¼šX/10åˆ†
**æ ¸å¿ƒç»“è®º**ï¼š[åŸºäºè´¢åŠ¡æŒ‡æ ‡çš„æŠ•èµ„å»ºè®®]
```

### 2. è¡Œä¸šå¯¹æ¯”ä¸ç«äº‰ä¼˜åŠ¿åˆ†æAgent

**åŠŸèƒ½å®šä½**ï¼šåˆ†æå…¬å¸åœ¨è¡Œä¸šä¸­çš„ç«äº‰åœ°ä½å’Œä¼˜åŠ¿

**æ ¸å¿ƒèŒè´£**ï¼š
- **è¡Œä¸šå¢é•¿åˆ†æ**ï¼šæ‰€å±è¡Œä¸šçš„å†å²å’Œé¢„æœŸå¢é•¿æƒ…å†µ
- **å…³é”®æŒ‡æ ‡å¯¹æ¯”**ï¼šæ¯›åˆ©ç‡ã€å‡€åˆ©ç‡ã€ROEä¸è¡Œä¸šå¤´éƒ¨ä¼ä¸šå¯¹æ¯”
- **å¸‚åœºåœ°ä½åˆ†æ**ï¼šå¸‚åœºä»½é¢ã€è¡Œä¸šæ’åã€ç«äº‰ä¼˜åŠ¿
- **æŠ¤åŸæ²³åˆ†æ**ï¼šæŠ€æœ¯å£å’ã€å“ç‰Œä¼˜åŠ¿ã€è§„æ¨¡æ•ˆåº”ç­‰

**å…³é”®æ•°æ®æº**ï¼š
```python
# ä¸»è¦ä½¿ç”¨çš„APIå’Œå·¥å…·
- get_stocks()                 # åŒè¡Œä¸šè‚¡ç¥¨ç­›é€‰
- get_financial_summary()      # æ‰¹é‡è·å–åŒè¡Œä¸šè´¢åŠ¡æ•°æ®
- calculate_financial_ratios() # è¡Œä¸šå¯¹æ¯”åˆ†æ
- get_indices()               # è¡Œä¸šæŒ‡æ•°æ•°æ®
- get_index_constituents()    # è¡Œä¸šæˆåˆ†è‚¡åˆ†æ
```

**è¾“å‡ºæ ¼å¼**ï¼š
```markdown
## è¡Œä¸šå¯¹æ¯”ä¸ç«äº‰ä¼˜åŠ¿åˆ†ææŠ¥å‘Š

### 1. è¡Œä¸šåŸºæœ¬æƒ…å†µ
- æ‰€å±è¡Œä¸šï¼š[å…·ä½“è¡Œä¸šåˆ†ç±»]
- è¡Œä¸šè¿‘3å¹´å¢é•¿ç‡ï¼šX%ï¼ˆæ•°æ®æ¥æºï¼šè¡Œä¸šç»Ÿè®¡ï¼‰
- è¡Œä¸šå‘å±•é˜¶æ®µï¼š[æˆé•¿æœŸ/æˆç†ŸæœŸ/è¡°é€€æœŸ]

### 2. å…³é”®è´¢åŠ¡æŒ‡æ ‡è¡Œä¸šå¯¹æ¯”
| æŒ‡æ ‡ | ç›®æ ‡å…¬å¸ | è¡Œä¸šå¹³å‡ | è¡Œä¸šç¬¬ä¸€ | æ’å |
|------|----------|----------|----------|------|
| æ¯›åˆ©ç‡ | X% | X% | X% | X/X |
| å‡€åˆ©ç‡ | X% | X% | X% | X/X |
| ROE | X% | X% | X% | X/X |

### 3. ç«äº‰åœ°ä½åˆ†æ
- å¸‚åœºä»½é¢ï¼šX%ï¼ˆæ•°æ®æ¥æºï¼šè¡Œä¸šæŠ¥å‘Šï¼‰
- è¡Œä¸šæ’åï¼šç¬¬Xä½
- ä¸»è¦ç«äº‰å¯¹æ‰‹ï¼š[å…¬å¸A, å…¬å¸B, å…¬å¸C]

### 4. ç«äº‰ä¼˜åŠ¿è¯†åˆ«
- æŠ€æœ¯ä¼˜åŠ¿ï¼š[æœ‰/æ— ] - [å…·ä½“ä¼˜åŠ¿æè¿°]
- å“ç‰Œä¼˜åŠ¿ï¼š[æœ‰/æ— ] - [å“ç‰Œå½±å“åŠ›åˆ†æ]
- è§„æ¨¡ä¼˜åŠ¿ï¼š[æœ‰/æ— ] - [è§„æ¨¡ç»æµæ•ˆåº”]
- æ¸ é“ä¼˜åŠ¿ï¼š[æœ‰/æ— ] - [é”€å”®æ¸ é“åˆ†æ]

**ç«äº‰åŠ›è¯„åˆ†**ï¼šX/10åˆ†
**æ ¸å¿ƒç»“è®º**ï¼š[å…¬å¸åœ¨è¡Œä¸šä¸­çš„ç«äº‰åœ°ä½è¯„ä¼°]
```

### 3. ä¼°å€¼ä¸å¸‚åœºä¿¡å·åˆ†æAgent

**åŠŸèƒ½å®šä½**ï¼šè¯„ä¼°å…¬å¸ä¼°å€¼æ°´å¹³å’Œå¸‚åœºä¿¡å·

**æ ¸å¿ƒèŒè´£**ï¼š
- **è‚¡æƒå˜åŠ¨åˆ†æ**ï¼šå¤§è‚¡ä¸œå‡æŒã€è‚¡æƒè´¨æŠ¼ç­‰å¼‚å¸¸å˜åŠ¨
- **è‚¡ä¸œç»“æ„åˆ†æ**ï¼šè‚¡ä¸œç±»å‹ã€æŒè‚¡é›†ä¸­åº¦ã€æœºæ„æŠ•èµ„è€…æ¯”ä¾‹
- **ä¼°å€¼åˆ†æ**ï¼šé‡‡ç”¨PR=PE/ROEå…¬å¼è¿›è¡Œé•¿æœŸä¼°å€¼åˆ†æ
- **å¸‚åœºä¿¡å·è§£è¯»**ï¼šæŠ€æœ¯æŒ‡æ ‡ã€èµ„é‡‘æµå‘ã€å¸‚åœºæƒ…ç»ª

**å…³é”®æ•°æ®æº**ï¼š
```python
# ä¸»è¦ä½¿ç”¨çš„APIå’Œå·¥å…·
- get_daily_quotes()          # è‚¡ä»·å’ŒæŠ€æœ¯æŒ‡æ ‡
- calculate_technical_indicators() # æŠ€æœ¯åˆ†æ
- get_stock_detail()          # è‚¡ç¥¨è¯¦ç»†ä¿¡æ¯
- analyze_market_trend()      # å¸‚åœºè¶‹åŠ¿åˆ†æ
```

**è¾“å‡ºæ ¼å¼**ï¼š
```markdown
## ä¼°å€¼ä¸å¸‚åœºä¿¡å·åˆ†ææŠ¥å‘Š

### 1. è‚¡æƒå˜åŠ¨æƒ…å†µ
- è¿‘6ä¸ªæœˆå¤§è‚¡ä¸œå‡æŒï¼š[æœ‰/æ— ] - [å…·ä½“æƒ…å†µ]
- è‚¡æƒè´¨æŠ¼æ¯”ä¾‹ï¼šX%ï¼ˆæ•°æ®æ¥æºï¼šå…¬å‘Šä¿¡æ¯ï¼‰
- å¼‚å¸¸è‚¡æƒå˜åŠ¨ï¼š[æœ‰/æ— ] - [é£é™©è¯„ä¼°]

### 2. è‚¡ä¸œç»“æ„åˆ†æ
- ç¬¬ä¸€å¤§è‚¡ä¸œæŒè‚¡æ¯”ä¾‹ï¼šX%
- å‰åå¤§è‚¡ä¸œæŒè‚¡æ¯”ä¾‹ï¼šX%
- æœºæ„æŠ•èµ„è€…æŒè‚¡æ¯”ä¾‹ï¼šX%
- è‚¡ä¸œç»“æ„ç‰¹ç‚¹ï¼š[é›†ä¸­/åˆ†æ•£] - [ç¨³å®šæ€§åˆ†æ]

### 3. ä¼°å€¼æ°´å¹³åˆ†æ
- å½“å‰PEï¼šXå€ï¼ˆæ•°æ®æ¥æºï¼šæœ€æ–°å¸‚åœºæ•°æ®ï¼‰
- å½“å‰PBï¼šXå€
- PRå€¼(PE/ROE)ï¼šXï¼ˆæ•°æ®æ¥æºï¼šè®¡ç®—å¾—å‡ºï¼‰
- å†å²PRå‡å€¼ï¼šX - å½“å‰ä¼°å€¼[ä½ä¼°/åˆç†/é«˜ä¼°]

### 4. å¸‚åœºä¿¡å·åˆ†æ
- æŠ€æœ¯æŒ‡æ ‡ä¿¡å·ï¼š[çœ‹æ¶¨/ä¸­æ€§/çœ‹è·Œ]
- èµ„é‡‘æµå‘ï¼š[å‡€æµå…¥/å‡€æµå‡º] Xä¸‡å…ƒ
- å¸‚åœºæƒ…ç»ªï¼š[ä¹è§‚/ä¸­æ€§/æ‚²è§‚]

**ä¼°å€¼è¯„åˆ†**ï¼šX/10åˆ†
**æ ¸å¿ƒç»“è®º**ï¼š[å½“å‰ä¼°å€¼æ°´å¹³å’ŒæŠ•èµ„æ—¶æœºåˆ†æ]
```

### 4. æŠ•èµ„åˆ†ææŠ¥å‘Šæ•´åˆAgent

**åŠŸèƒ½å®šä½**ï¼šæ•´åˆå‰ä¸‰ä¸ªAgentçš„åˆ†æç»“æœï¼Œç”Ÿæˆæœ€ç»ˆæŠ•èµ„æŠ¥å‘Š

**æ ¸å¿ƒèŒè´£**ï¼š
- **é‡‘å­—å¡”åŸç†æŠ¥å‘Šç”Ÿæˆ**ï¼šç»“è®ºå…ˆè¡Œï¼Œé€å±‚æ”¯æ’‘
- **å¤šç»´åº¦è¯„åˆ†æ•´åˆ**ï¼šè´¢åŠ¡ã€ç«äº‰åŠ›ã€ä¼°å€¼çš„ç»¼åˆè¯„åˆ†
- **æŠ•èµ„å»ºè®®è¾“å‡º**ï¼šæ˜ç¡®çš„ä¹°å…¥/æŒæœ‰/å–å‡ºå»ºè®®
- **é£é™©æç¤º**ï¼šå…³é”®é£é™©ç‚¹å’Œæ³¨æ„äº‹é¡¹

**è¾“å‡ºæ ¼å¼**ï¼š
```markdown
# [è‚¡ç¥¨ä»£ç ] [å…¬å¸åç§°] æŠ•èµ„ä»·å€¼åˆ†ææŠ¥å‘Š

## ğŸ¯ æŠ•èµ„å»ºè®®æ€»ç»“
**æœ€ç»ˆå»ºè®®**ï¼š[å¼ºçƒˆæ¨è/æ¨è/ä¸­æ€§/ä¸æ¨è/å¼ºçƒˆä¸æ¨è]
**ç›®æ ‡ä»·æ ¼**ï¼šXå…ƒï¼ˆåŸºäºPRä¼°å€¼æ¨¡å‹ï¼‰
**æŠ•èµ„æ—¶é—´**ï¼š[çŸ­æœŸ/ä¸­æœŸ/é•¿æœŸ]
**æ ¸å¿ƒé€»è¾‘**ï¼š[ä¸€å¥è¯æ€»ç»“æŠ•èµ„ä»·å€¼]

## ğŸ“Š ç»¼åˆè¯„åˆ†
| ç»´åº¦ | è¯„åˆ† | æƒé‡ | åŠ æƒå¾—åˆ† |
|------|------|------|----------|
| è´¢åŠ¡è´¨é‡ | X/10 | 40% | X |
| ç«äº‰ä¼˜åŠ¿ | X/10 | 30% | X |
| ä¼°å€¼æ°´å¹³ | X/10 | 30% | X |
| **ç»¼åˆå¾—åˆ†** | **X/10** | 100% | **X** |

## ğŸ’¡ å…³é”®æŠ•èµ„äº®ç‚¹
1. **è´¢åŠ¡è¡¨ç°**ï¼š[å…³é”®è´¢åŠ¡ä¼˜åŠ¿]
2. **ç«äº‰åœ°ä½**ï¼š[æ ¸å¿ƒç«äº‰ä¼˜åŠ¿]
3. **ä¼°å€¼æœºä¼š**ï¼š[ä¼°å€¼ä¼˜åŠ¿åˆ†æ]

## âš ï¸ ä¸»è¦é£é™©æç¤º
1. **è´¢åŠ¡é£é™©**ï¼š[å¦‚è´Ÿå€ºç‡è¿‡é«˜]
2. **è¡Œä¸šé£é™©**ï¼š[å¦‚è¡Œä¸šå‘¨æœŸæ€§]
3. **å¸‚åœºé£é™©**ï¼š[å¦‚ä¼°å€¼è¿‡é«˜]

## ğŸ“ˆ è¯¦ç»†åˆ†ææŠ¥å‘Š
### è´¢åŠ¡æŒ‡æ ‡åˆ†æ
[å¼•ç”¨è´¢åŠ¡åˆ†æAgentçš„è¯¦ç»†æŠ¥å‘Š]

### è¡Œä¸šç«äº‰åˆ†æ
[å¼•ç”¨è¡Œä¸šåˆ†æAgentçš„è¯¦ç»†æŠ¥å‘Š]

### ä¼°å€¼ä¸å¸‚åœºä¿¡å·
[å¼•ç”¨ä¼°å€¼åˆ†æAgentçš„è¯¦ç»†æŠ¥å‘Š]

---
**æŠ¥å‘Šç”Ÿæˆæ—¶é—´**ï¼š[æ—¶é—´æˆ³]
**æ•°æ®æ¥æº**ï¼šAè‚¡æ•°æ®APIã€MCPæœåŠ¡
**å…è´£å£°æ˜**ï¼šæœ¬æŠ¥å‘Šä»…ä¾›å‚è€ƒï¼Œä¸æ„æˆæŠ•èµ„å»ºè®®
```

---

## ğŸ“Š çŠ¶æ€ç®¡ç†è®¾è®¡

### AnalysisStateå®šä¹‰
```python
from typing import Annotated, Optional
from typing_extensions import TypedDict
from langchain_core.messages import BaseMessage

class AnalysisState(TypedDict):
    # åŸºç¡€ä¿¡æ¯
    stock_symbol: Annotated[str, "è‚¡ç¥¨ä»£ç ï¼Œå¦‚000001"]
    company_name: Annotated[str, "å…¬å¸åç§°ï¼Œå¦‚å¹³å®‰é“¶è¡Œ"]
    analysis_date: Annotated[str, "åˆ†ææ—¥æœŸï¼ŒYYYY-MM-DDæ ¼å¼"]
    
    # æ¶ˆæ¯å†å²
    messages: Annotated[list[BaseMessage], "Agenté—´çš„æ¶ˆæ¯å†å²"]
    
    # åˆ†ææŠ¥å‘Šï¼ˆå„Agentè¾“å‡ºï¼‰
    financial_analysis: Annotated[Optional[str], "æ ¸å¿ƒè´¢åŠ¡æŒ‡æ ‡åˆ†ææŠ¥å‘Š"]
    industry_analysis: Annotated[Optional[str], "è¡Œä¸šå¯¹æ¯”ä¸ç«äº‰ä¼˜åŠ¿åˆ†ææŠ¥å‘Š"]
    valuation_analysis: Annotated[Optional[str], "ä¼°å€¼ä¸å¸‚åœºä¿¡å·åˆ†ææŠ¥å‘Š"]
    
    # è¯„åˆ†ç»“æœ
    financial_score: Annotated[Optional[float], "è´¢åŠ¡è´¨é‡è¯„åˆ† (0-10)"]
    competition_score: Annotated[Optional[float], "ç«äº‰ä¼˜åŠ¿è¯„åˆ† (0-10)"]
    valuation_score: Annotated[Optional[float], "ä¼°å€¼æ°´å¹³è¯„åˆ† (0-10)"]
    
    # æœ€ç»ˆè¾“å‡º
    final_report: Annotated[Optional[str], "æœ€ç»ˆæŠ•èµ„åˆ†ææŠ¥å‘Š"]
    investment_recommendation: Annotated[Optional[str], "æŠ•èµ„å»ºè®®ï¼šå¼ºçƒˆæ¨è/æ¨è/ä¸­æ€§/ä¸æ¨è/å¼ºçƒˆä¸æ¨è"]
    target_price: Annotated[Optional[float], "ç›®æ ‡ä»·æ ¼"]
    
    # æ•°æ®æ¥æºè¿½è¸ª
    data_sources: Annotated[list[str], "ä½¿ç”¨çš„æ•°æ®æºåˆ—è¡¨"]
    
    # é”™è¯¯å¤„ç†
    errors: Annotated[list[str], "å¤„ç†è¿‡ç¨‹ä¸­çš„é”™è¯¯ä¿¡æ¯"]
    warnings: Annotated[list[str], "è­¦å‘Šä¿¡æ¯"]
```

---

## ğŸ”„ å·¥ä½œæµè®¾è®¡

### 1. æ‰§è¡Œæµç¨‹
```mermaid
graph TD
    A[ç”¨æˆ·è¾“å…¥è‚¡ç¥¨ä»£ç ] --> B[åˆå§‹åŒ–AnalysisState]
    B --> C[æ ¸å¿ƒè´¢åŠ¡æŒ‡æ ‡åˆ†æAgent]
    B --> D[è¡Œä¸šå¯¹æ¯”åˆ†æAgent]
    B --> E[ä¼°å€¼åˆ†æAgent]
    C --> F[æ”¶é›†åˆ†æç»“æœ]
    D --> F
    E --> F
    F --> G[æŠ•èµ„æŠ¥å‘Šæ•´åˆAgent]
    G --> H[ç”Ÿæˆæœ€ç»ˆæŠ¥å‘Š]
    H --> I[è¾“å‡ºæŠ•èµ„å»ºè®®]
```

### 2. å¹¶è¡Œå¤„ç†è®¾è®¡
```python
# ä¸‰ä¸ªåˆ†æAgentå¯ä»¥å¹¶è¡Œæ‰§è¡Œï¼Œæå‡æ•ˆç‡
async def parallel_analysis(state: AnalysisState):
    tasks = [
        financial_analysis_agent(state),
        industry_analysis_agent(state),
        valuation_analysis_agent(state)
    ]
    results = await asyncio.gather(*tasks)
    return merge_results(results)
```

### 3. é”™è¯¯å¤„ç†æœºåˆ¶
```python
def error_handler(func):
    def wrapper(state: AnalysisState):
        try:
            return func(state)
        except Exception as e:
            state['errors'].append(f"{func.__name__}: {str(e)}")
            return state
    return wrapper
```

---

## ğŸ› ï¸ æŠ€æœ¯å®ç°è¦ç‚¹

### 1. LLMé…ç½®
```python
# ä½¿ç”¨ç”¨æˆ·æä¾›çš„è‡ªå®šä¹‰endpoint
DEFAULT_CONFIG = {
    "llm_provider": "openai",
    "deep_think_llm": "gpt-4o",  # ç”¨äºå¤æ‚åˆ†æ
    "quick_think_llm": "gpt-4o-mini",  # ç”¨äºç®€å•å¤„ç†
    "backend_url": "https://oned.lvtu.in",  # ç”¨æˆ·è‡ªå®šä¹‰endpoint
    "local_llm_url": "http://localhost:10000",  # æœ¬åœ°Ollama
}
```

### 2. æ•°æ®æºé›†æˆ
```python
# Aè‚¡æ•°æ®APIå·¥å…·é›†
class AShareToolkit:
    def __init__(self, config):
        self.api_client = AShareAPIClient(base_url="http://localhost:8000/api/v1")
        self.mcp_client = MCPClient(endpoint="ws://server.com:8001")
    
    async def get_financial_data(self, symbol: str):
        # æ•´åˆAPIå’ŒMCPæœåŠ¡çš„æ•°æ®è·å–
        pass
```

### 3. å†…å­˜ç®¡ç†
```python
# å‚è€ƒTradingAgentsçš„å†…å­˜è®¾è®¡
class AnalysisMemory(FinancialSituationMemory):
    def __init__(self, agent_name: str, config: dict):
        super().__init__(agent_name, config)
        self.analysis_history = []
    
    def save_analysis(self, symbol: str, report: str):
        # ä¿å­˜åˆ†æå†å²ï¼Œç”¨äºå­¦ä¹ æ”¹è¿›
        pass
```

---

## ğŸ“ ç›®å½•ç»“æ„è®¾è®¡

```
tradingagents/analysis_stock_agent/
â”œâ”€â”€ __init__.py
â”œâ”€â”€ agents/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ financial_analysis_agent.py     # æ ¸å¿ƒè´¢åŠ¡æŒ‡æ ‡åˆ†æAgent
â”‚   â”œâ”€â”€ industry_analysis_agent.py      # è¡Œä¸šå¯¹æ¯”åˆ†æAgent
â”‚   â”œâ”€â”€ valuation_analysis_agent.py     # ä¼°å€¼åˆ†æAgent
â”‚   â””â”€â”€ report_integration_agent.py     # æŠ¥å‘Šæ•´åˆAgent
â”œâ”€â”€ tools/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ ashare_toolkit.py              # Aè‚¡æ•°æ®å·¥å…·é›†
â”‚   â””â”€â”€ mcp_integration.py             # MCPæœåŠ¡é›†æˆ
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ analysis_states.py             # çŠ¶æ€å®šä¹‰
â”‚   â”œâ”€â”€ report_formatter.py            # æŠ¥å‘Šæ ¼å¼åŒ–
â”‚   â””â”€â”€ data_validator.py              # æ•°æ®éªŒè¯
â”œâ”€â”€ graph/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ analysis_graph.py              # ä¸»è¦çš„å›¾è®¾ç½®
â”‚   â””â”€â”€ workflow_setup.py              # å·¥ä½œæµé…ç½®
â”œâ”€â”€ memory/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ analysis_memory.py             # åˆ†æå†å²è®°å½•
â””â”€â”€ config/
    â”œâ”€â”€ __init__.py
    â””â”€â”€ analysis_config.py             # åˆ†æé…ç½®
```

---

## ğŸ”§ é…ç½®ä¸éƒ¨ç½²

### 1. ç¯å¢ƒè¦æ±‚
- Python 3.13+
- Aè‚¡æ•°æ®APIæœåŠ¡è¿è¡Œåœ¨ http://localhost:8000
- MCPæœåŠ¡è¿æ¥ï¼ˆå¯é€‰ï¼‰
- è‡ªå®šä¹‰LLM endpointè®¿é—®

### 2. å…³é”®é…ç½®
```python
ANALYSIS_CONFIG = {
    # LLMé…ç½®
    "llm_provider": "openai",
    "analysis_llm": "gpt-4o",  # ä¸»è¦åˆ†ææ¨¡å‹
    "summary_llm": "gpt-4o-mini",  # æ‘˜è¦ç”Ÿæˆæ¨¡å‹
    "backend_url": "https://oned.lvtu.in",
    
    # æ•°æ®æºé…ç½®
    "ashare_api_url": "http://localhost:8000/api/v1",
    "mcp_endpoint": "ws://server.com:8001",
    "use_mcp": True,  # æ˜¯å¦ä½¿ç”¨MCPæœåŠ¡
    
    # åˆ†æå‚æ•°
    "analysis_period": "3years",  # åˆ†ææ—¶é—´èŒƒå›´
    "industry_comparison_count": 10,  # è¡Œä¸šå¯¹æ¯”å…¬å¸æ•°é‡
    "technical_indicators": ["ma", "rsi", "macd"],  # æŠ€æœ¯æŒ‡æ ‡
    
    # æŠ¥å‘Šé…ç½®
    "report_format": "markdown",
    "include_charts": False,  # æ˜¯å¦åŒ…å«å›¾è¡¨
    "language": "zh-CN",  # æŠ¥å‘Šè¯­è¨€
}
```

### 3. Dockeréƒ¨ç½²ï¼ˆå¯é€‰ï¼‰
```dockerfile
# å¦‚æœéœ€è¦ç‹¬ç«‹éƒ¨ç½²ï¼Œå°†åœ¨Phase 5æä¾›å®Œæ•´çš„Dockeré…ç½®
```

---

## âœ… è®¾è®¡éªŒè¯è¦ç‚¹

### 1. åŠŸèƒ½å®Œæ•´æ€§æ£€æŸ¥
- âœ… è¦†ç›–ç”¨æˆ·éœ€æ±‚çš„4ä¸ªæ ¸å¿ƒAgent
- âœ… é›†æˆAè‚¡æ•°æ®APIçš„17ä¸ªå·¥å…·
- âœ… æ”¯æŒMCPæœåŠ¡è°ƒç”¨
- âœ… é‡‘å­—å¡”åŸç†æŠ¥å‘Šç»“æ„
- âœ… æ•°æ®æ¥æºå¯è¿½æº¯

### 2. æŠ€æœ¯å…¼å®¹æ€§æ£€æŸ¥
- âœ… éµå¾ªTradingAgentsæ¶æ„æ¨¡å¼
- âœ… å…¼å®¹LangGraphå·¥ä½œæµæ¡†æ¶
- âœ… æ”¯æŒç”¨æˆ·è‡ªå®šä¹‰LLM endpoint
- âœ… æ”¯æŒæœ¬åœ°Ollamaæ¨¡å‹

### 3. æ‰©å±•æ€§æ£€æŸ¥
- âœ… æ¨¡å—åŒ–è®¾è®¡ï¼Œæ˜“äºæ·»åŠ æ–°Agent
- âœ… é…ç½®é©±åŠ¨ï¼Œæ˜“äºè°ƒæ•´å‚æ•°
- âœ… æ’ä»¶åŒ–å·¥å…·é›†æˆ
- âœ… å†…å­˜æœºåˆ¶æ”¯æŒå­¦ä¹ æ”¹è¿›

---

**æ¶æ„è®¾è®¡å®Œæˆæ—¶é—´**ï¼š2025-08-15
**è®¾è®¡ç‰ˆæœ¬**ï¼šv1.0
**ä¸‹ä¸€æ­¥**ï¼šæŠ€æœ¯æ–¹æ¡ˆåˆ¶å®šå’Œè¯¦ç»†å®ç°è®¡åˆ’